/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */
package View;

import Control.Lists_Meun;
import Control.control_user_admin;

import DB.DatabaseConnection;
import Model.MessageType;
import Model.m_User;
import java.awt.GraphicsDevice;
import static java.awt.SystemColor.info;
import java.awt.event.KeyEvent;
import javax.swing.JFrame;
import javax.swing.JOptionPane;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.util.HashSet;
import java.util.Set;
import javax.swing.JPanel;
import rojerusan.RSNotifyAnimated;

/**
 *
 * @author ahmad-soft
 */
public class Login extends javax.swing.JFrame {

public static String name_user;

     static String fill_name_user;
    boolean test_admin1;
    
    
    

    /**
     * Creates new form Login
     */
    public Login() {
        initComponents();
        txt_user.requestFocus();
     
       // setExtendedState(JFrame.MAXIMIZED_BOTH);
//       Control.Lists_Meun meuns;


    }
     public Login(String txt_name) {
        initComponents();
      //  setExtendedState(JFrame.MAXIMIZED_BOTH);
             txt_user.requestFocus();
    txt_user.setText(txt_name);
    }
    
    
    

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        chk_password = new RSMaterialComponent.RSCheckBoxMaterial();
        txt_pass = new RSMaterialComponent.RSPasswordMaterial();
        btn_Exit = new RSMaterialComponent.RSButtonMaterialShadow();
        btn_Login = new RSMaterialComponent.RSButtonMaterialShadow();
        txt_user = new RSMaterialComponent.RSTextFieldMaterial();
        jLabel1 = new javax.swing.JLabel();
        jPanel1 = new javax.swing.JPanel();

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);
        setUndecorated(true);
        getContentPane().setLayout(new org.netbeans.lib.awtextra.AbsoluteLayout());

        chk_password.setForeground(new java.awt.Color(11, 10, 8));
        chk_password.setText("إظهار كلمة المرور");
        chk_password.setColorCheck(new java.awt.Color(185, 146, 79));
        chk_password.setColorUnCheck(new java.awt.Color(185, 146, 79));
        chk_password.setFont(new java.awt.Font("Arial", 1, 12)); // NOI18N
        chk_password.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        chk_password.setHorizontalTextPosition(javax.swing.SwingConstants.LEFT);
        chk_password.setIsEffectRipple(false);
        chk_password.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                chk_passwordActionPerformed(evt);
            }
        });
        getContentPane().add(chk_password, new org.netbeans.lib.awtextra.AbsoluteConstraints(320, 590, 110, -1));

        txt_pass.setBackground(new java.awt.Color(254, 254, 254));
        txt_pass.setBorder(javax.swing.BorderFactory.createMatteBorder(1, 1, 1, 1, new java.awt.Color(202, 77, 77)));
        txt_pass.setForeground(new java.awt.Color(1, 1, 1));
        txt_pass.setHorizontalAlignment(javax.swing.JTextField.CENTER);
        txt_pass.setColorMaterial(new java.awt.Color(185, 146, 79));
        txt_pass.setDisabledTextColor(new java.awt.Color(254, 254, 254));
        txt_pass.setFont(new java.awt.Font("Arial", 1, 20)); // NOI18N
        txt_pass.setPhColor(new java.awt.Color(185, 146, 79));
        txt_pass.setPlaceholder("");
        txt_pass.setSelectionColor(new java.awt.Color(185, 146, 79));
        txt_pass.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyPressed(java.awt.event.KeyEvent evt) {
                txt_passKeyPressed(evt);
            }
        });
        getContentPane().add(txt_pass, new org.netbeans.lib.awtextra.AbsoluteConstraints(230, 520, 260, 60));

        btn_Exit.setBackground(new java.awt.Color(185, 146, 79));
        btn_Exit.setText("X");
        btn_Exit.setBackgroundHover(new java.awt.Color(117, 101, 75));
        btn_Exit.setCursor(new java.awt.Cursor(java.awt.Cursor.DEFAULT_CURSOR));
        btn_Exit.setEffectButton(RSMaterialComponent.RSButtonMaterialShadow.EFFECTBUTTON.RAISED);
        btn_Exit.setEffectFocus(true);
        btn_Exit.setFont(new java.awt.Font("Arial", 1, 24)); // NOI18N
        btn_Exit.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btn_ExitActionPerformed(evt);
            }
        });
        getContentPane().add(btn_Exit, new org.netbeans.lib.awtextra.AbsoluteConstraints(10, 10, 50, 40));

        btn_Login.setBackground(new java.awt.Color(185, 146, 79));
        btn_Login.setText("تسجيل الدخول");
        btn_Login.setBackgroundHover(new java.awt.Color(117, 101, 75));
        btn_Login.setCursor(new java.awt.Cursor(java.awt.Cursor.DEFAULT_CURSOR));
        btn_Login.setEffectButton(RSMaterialComponent.RSButtonMaterialShadow.EFFECTBUTTON.RAISED);
        btn_Login.setEffectFocus(true);
        btn_Login.setFont(new java.awt.Font("Arial", 1, 24)); // NOI18N
        btn_Login.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btn_LoginActionPerformed(evt);
            }
        });
        btn_Login.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyPressed(java.awt.event.KeyEvent evt) {
                btn_LoginKeyPressed(evt);
            }
        });
        getContentPane().add(btn_Login, new org.netbeans.lib.awtextra.AbsoluteConstraints(270, 640, 200, 50));

        txt_user.setBorder(javax.swing.BorderFactory.createEtchedBorder());
        txt_user.setForeground(new java.awt.Color(1, 1, 1));
        txt_user.setHorizontalAlignment(javax.swing.JTextField.CENTER);
        txt_user.setColorMaterial(new java.awt.Color(17, 14, 9));
        txt_user.setFont(new java.awt.Font("Arial", 1, 16)); // NOI18N
        txt_user.setPlaceholder("");
        txt_user.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                txt_userActionPerformed(evt);
            }
        });
        getContentPane().add(txt_user, new org.netbeans.lib.awtextra.AbsoluteConstraints(230, 390, 260, 50));

        jLabel1.setIcon(new javax.swing.ImageIcon(getClass().getResource("/Images/login.png"))); // NOI18N
        getContentPane().add(jLabel1, new org.netbeans.lib.awtextra.AbsoluteConstraints(0, 0, -1, -1));
        getContentPane().add(jPanel1, new org.netbeans.lib.awtextra.AbsoluteConstraints(40, 230, -1, -1));

        pack();
        setLocationRelativeTo(null);
    }// </editor-fold>//GEN-END:initComponents

    private void btn_LoginActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btn_LoginActionPerformed

       


        String user = txt_user.getText();
        String pass = txt_pass.getText();
        // لإرسال اسم المستخدم للفورم   Loin
         name_user=txt_user.getText();
         
        if (txt_user.getText().equals("") || txt_pass.getText().equals("")) {
            View.Message a = new Message(this, true, "الرجاء أدخل الاسم المستخدم أو كلمة المرور", MessageType.WARNING, 25);a.setVisible(true);
            return;
        }

        try {
            // الاتصال بقاعدة
            DatabaseConnection dbc = DB.DatabaseConnection.getinstance(user, pass);
            // start info user 
            Control.control_user_admin info = new control_user_admin();
            String user_type = info.get_info_type(user);
            // end info user
            
         
         //لجلب معلومات عن مستخدم
           Model.m_User users = control_user_admin.view_info_user();
           
           
      //  Model.m_User info_admin = control_user_admin.view_info_admin();
              

           switch (user_type) {
               
                case "data_entry":
                    String f = "مدخل البيانات";
                    fill_name_user = users.full_name().toString();
                    new View.main(fill_name_user).setVisible(true); 
                   this.dispose();
                   
                    break;
                case "data_checker":
                    String f1 = "مدقق البيانات";
                 fill_name_user = users.full_name().toString();
                  this.dispose();
                  new View.main(fill_name_user).setVisible(true);
                    break;
                case "super_admins":
                    String f2 = "مدير";
                   fill_name_user = users.full_name().toString();
                   test_admin1 = true;
                   this.dispose(); 
                   new View.super_admin().setVisible(true);
                    this.dispose(); 
                    break;
                case "admin":
                      test_admin1 = false;
                      this.dispose();
                     new View.super_admin().setVisible(true);
                    this.dispose(); 
                    break;
                    default:
                    
                    
                
} 

    } catch (Exception ex) {
       // JOptionPane.showMessageDialog(null, "خطا في اسم المستخدم أو كلمة المرور أو فشل الاتصال");
//         new rojerusan.RSNotifyAnimated("معلومات", "خطا في اسم المستخدم أو كلمة المرور" , 4, RSNotifyAnimated.PositionNotify.BottomRight, RSNotifyAnimated.AnimationNotify.RightLeft, RSNotifyAnimated.TypeNotify.ERROR).setVisible(true);
      }


    }//GEN-LAST:event_btn_LoginActionPerformed

    private void btn_ExitActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btn_ExitActionPerformed
            System.exit(0);
    }//GEN-LAST:event_btn_ExitActionPerformed

    private void chk_passwordActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_chk_passwordActionPerformed

        if(chk_password.isSelected()){
            txt_pass.setEchoChar((char)0);

        }else{
            txt_pass.setEchoChar(('*'));
        }
    }//GEN-LAST:event_chk_passwordActionPerformed

    private void txt_userActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_txt_userActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_txt_userActionPerformed

    private void txt_passKeyPressed(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_txt_passKeyPressed
     if(evt.getKeyCode() == KeyEvent.VK_ENTER){
         
//          Control.Lists_Meun download_menus = new Lists_Meun(pr);
//          download_menus.run();



        String user = txt_user.getText();
        String pass = txt_pass.getText();
        // لإرسال اسم المستخدم للفورم   Loin
         name_user=txt_user.getText();
         
        if (txt_user.getText().equals("") || txt_pass.getText().equals("")) {
              View.Message meg = new Message(this, true, "الرجاء أدخل الاسم المستخدم أو كلمة المرور", MessageType.WARNING, 25);meg.setVisible(true);
          //  JOptionPane.showMessageDialog(null, "الرجاء أدخل الاسم المستخدم أو كلمة المرور");
            return;
        }

        try {
            // الاتصال بقاعدة
            DatabaseConnection dbc = DB.DatabaseConnection.getinstance(user, pass);
            // start info user 
            Control.control_user_admin info = new control_user_admin();
            String user_type = info.get_info_type(user);
            // end info user
            
         
         //لجلب معلومات عن مستخدم
           Model.m_User users = control_user_admin.view_info_user();

              

           switch (user_type) {
               
                case "data_entry":
                    String f = "مدخل البيانات";
                    fill_name_user = users.full_name().toString();
                    new View.main(fill_name_user).setVisible(true); 
                   this.dispose();
                    break;
                case "data_checker":
                    String f1 = "مدقق البيانات";
                 fill_name_user = users.full_name().toString();
                  new View.main(fill_name_user).setVisible(true);
                    this.dispose();

                    break;
                case "super_admins":
                    String f2 = "مدير";
                   fill_name_user = users.full_name().toString();
                   test_admin1 = true;
           
                      this.dispose(); 
                   new View.super_admin().setVisible(true);
                 this.dispose(); 
                    break;
                case "admin":
                      test_admin1 = false;
             //     new View.main(fill_name_user).setVisible(true); 
                         this.dispose(); 
                     new View.super_admin().setVisible(true);
                     this.dispose(); 
                    break;
                    default:
                    
                    
                
} 

    } catch (Exception ex) {
      //  JOptionPane.showMessageDialog(null, "خطا في اسم المستخدم أو كلمة المرور");
//         new rojerusan.RSNotifyAnimated("معلومات", "خطا في اسم المستخدم أو كلمة المرور" , 4, RSNotifyAnimated.PositionNotify.BottomRight, RSNotifyAnimated.AnimationNotify.RightLeft, RSNotifyAnimated.TypeNotify.ERROR).setVisible(true);
      }


     }

        
    }//GEN-LAST:event_txt_passKeyPressed

    private void btn_LoginKeyPressed(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_btn_LoginKeyPressed



        String user = txt_user.getText();
        String pass = txt_pass.getText();
        // لإرسال اسم المستخدم للفورم   Loin
         name_user=txt_user.getText();
         
        if (txt_user.getText().equals("") || txt_pass.getText().equals("")) {
             View.Message meg = new Message(this, true, "الرجاء أدخل الاسم المستخدم أو كلمة المرور", MessageType.WARNING , 25);meg.setVisible(true);
        
            return;
        }

        try {
            // الاتصال بقاعدة
            DatabaseConnection dbc = DB.DatabaseConnection.getinstance(user, pass);
            // start info user 
            Control.control_user_admin info = new control_user_admin();
            String user_type = info.get_info_type(user);
            // end info user
            
         
         //لجلب معلومات عن مستخدم
           Model.m_User users = control_user_admin.view_info_user();
           
           
      //  Model.m_User info_admin = control_user_admin.view_info_admin();
              

           switch (user_type) {
               
                case "data_entry":
                    String f = "مدخل البيانات";
                    fill_name_user = users.full_name().toString();
                //    View.frmLoading log = new frmLoading();
                 
                    new View.main(fill_name_user).setVisible(true); 
                   this.dispose();
                   
                    break;
                case "data_checker":
                    String f1 = "مدقق البيانات";
                 fill_name_user = users.full_name().toString();
                  new View.main(fill_name_user).setVisible(true);
                    this.dispose();

                    break;
                case "super_admins":
                    String f2 = "مدير";
                   fill_name_user = users.full_name().toString();
                   test_admin1 = true;
                  // new  View.main(fill_name_user, test_admin1).setVisible(true);
                   //new View.super_admin(test_admin1).setVisible(true);
                   new View.super_admin().setVisible(true);
                    this.dispose(); 
                    break;
                case "admin":
                      test_admin1 = false;
             //     new View.main(fill_name_user).setVisible(true); 
                //      fill_name_user = info_admin.full_name().toString();
                      
                      
                     new View.super_admin().setVisible(true);
                 //    new View.super_admin(fill_name_user).setVisible(true);
                     
                    
                    break;
                    default:
                    
                    
                
} 

    } catch (Exception ex) {
         View.Message meg = new Message(this, true, "خطا في اسم المستخدم أو كلمة المرور أو فشل الاتصال", MessageType.ERROR , 25);meg.setVisible(true);
       // JOptionPane.showMessageDialog(null, "خطا في اسم المستخدم أو كلمة المرور أو فشل الاتصال");
       // new rojerusan.RSNotifyAnimated("معلومات", "خطا في اسم المستخدم أو كلمة المرور" , 4, RSNotifyAnimated.PositionNotify.BottomRight, RSNotifyAnimated.AnimationNotify.RightLeft, RSNotifyAnimated.TypeNotify.ERROR).setVisible(true);
      }        // TODO add your handling code here:
    }//GEN-LAST:event_btn_LoginKeyPressed

    /**
     * @param args the command line arguments
     */
    public static void main(String args[]) {
        /* Set the Nimbus look and feel */
        //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
        /* If Nimbus (introduced in Java SE 6) is not available, stay with the default look and feel.
         * For details see http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html 
         */
        try {
            for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
                if ("Nimbus".equals(info.getName())) {
                    javax.swing.UIManager.setLookAndFeel(info.getClassName());
                    break;
                }
            }
        } catch (ClassNotFoundException ex) {
            java.util.logging.Logger.getLogger(Login.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (InstantiationException ex) {
            java.util.logging.Logger.getLogger(Login.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (IllegalAccessException ex) {
            java.util.logging.Logger.getLogger(Login.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (javax.swing.UnsupportedLookAndFeelException ex) {
            java.util.logging.Logger.getLogger(Login.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        }
        //</editor-fold>

        /* Create and display the form */
        java.awt.EventQueue.invokeLater(new Runnable() {
            public void run() {
                new Login().setVisible(true);
            }
        });
    }

    // Variables declaration - do not modify//GEN-BEGIN:variables
    private RSMaterialComponent.RSButtonMaterialShadow btn_Exit;
    private RSMaterialComponent.RSButtonMaterialShadow btn_Login;
    private RSMaterialComponent.RSCheckBoxMaterial chk_password;
    private javax.swing.JLabel jLabel1;
    private javax.swing.JPanel jPanel1;
    private RSMaterialComponent.RSPasswordMaterial txt_pass;
    private RSMaterialComponent.RSTextFieldMaterial txt_user;
    // End of variables declaration//GEN-END:variables
}
